---
layout: post
title: 자바스크립트 기초 정리 - 07. Ajax
subtitle : Ajax, JSON 개념 정리
tags: [javascript]
author: Sohyun Kim
comments : False
---

<h3>#Ajax</h3>   
Ajax는 그 자체가 별도의 새로운 언어는 아님. 웹페이지 전체를 다시 로딩하지 않고도, 웹페이지의 일부분만 갱신할수 있게 해줌. 즉, Ajax는 백그라운드영역에서 서버와 통신하여, 그 결과를 웹페이지 일부에 표시해줌.   
이때 서버와는 다음과 같은 형태의 데이터를 주고 받음.   
- JSON   
- XML   
- HTML   
- 텍스트파일 등   
   
<br>
**Ajax의 장점과 한계**   
    
| 장점  | 한계 |
| :-------: | :-------: |
| 웹페이지 전체를 다시 로딩하지 않고도 일부분만 갱신하여 속도를 높임 | 클라이언트가 서버에 요청하는 방식으로 서버푸시 방식(server push 방식이란 사용자가 요청하지 않아도 서버가 알아서 자동으로 특정 정보를 제공하는 것 = 앱푸시알림)의 실시간 서비스를 불가능함 |
| 웹페이지 로드 후에 서버로부터 데이터 요청을 보낼 수 있음 | Ajax로는 바이너리 데이터(일반적으로 이미지나 멀티미디어 데이터)를 보내거나 받을 수 없음 |
| 웹페이지 로드 후에 서버로부터 데이터 받을 수 있음 | Ajax 스크립트가 포함된 서버가 아닌 다른 서버로는 Ajax 요청을 보낼 수 없음 |
| 백그라운드 영역에서 서버로 데이터를 보낼 수 있음(비동기) | 클라이언트의 PC로는 Ajax 요청을 보낼 수 없음 |
   
<br>
**Ajax의 구성요소**   
 - 웹 페이지의 표현을 위한 HTML과 CSS   
 - 데이터에 접근하거나 화면 구성을 동적으로 조작하기 위해 사용되는 DOM 모델   
 - 데이터의 교환을 위한 JSON이나 XML   
 - 웹 서버와의 비동기식 통신을 위한 XMLHttpRequest 객체   
 - 위에서 언급한 모든 기술을 결합하여 사용자의 작업 흐름을 제어하는 데 사용되는 자바스크립트   
   
<br>
**Ajax의 동작원리**   
1. 웹브라우저에서 사용자에 의한 요청이벤트가 발생   
2. 이벤트핸들러에 의해 자바스크립트 호출   
3. 자바스크립트는 XMLHttpRequest객체를 사용하여 서버로 요청을 보냄(웹브라우저는 요청을 보내고 서버의 응답을 기다릴 필요없이 비동기적으로 다른 작업을 처리할 수 있음)   
4. 서버는 전달받은 XMLHttpRequest객체를 가지고 Ajax 요청을 처리함   
5. 서버는 처리한 결과를 HTML, XML, JSON 형태의 데이터로 웹브라우저에 전달함(웹페이지 전부를 보내는 것이 아닌 요청받은 필요한 데이터만을 전달)   
6. 서버로부터 전달받은 데이터를 가지고 웹페이지는 이부분만 갱식하는 자바스크립트를 호출함   
7. 웹페이지의 일부분만 다시 로딩되어 표시됨   
   
<br>
**XMLHttpRequest 객체**   
XMLHttpRequest 객체는 Ajax의 핵심적인 구성요소로, 웹브라우저가 백그라운드에서 계속해서 서버와 통신할 수 있게 해줌.   
서버에 요청을 보내기위해서는 우선 XMLHttpRequest 인스턴스를 생성한 후 XMLHttpRequest 인스턴스의 open() 메소드와 send() 메소드를 사용하여 요청을 보낼 수 있음.

{% highlight javascript %}
//open() 메서드는 서버로 보낼 Ajax요청의 형식을 설정함
.open('전달방식', 'URL주소', '동기여부');

//send() 메서드는 서버로 Ajax 요청을 전달함
.send(); // GET방식
.send('문자열'); // POST방식
{% endhighlight %}
<br>   
서버로 부터 응답을 확인할때는 아래의 프로퍼티를 사용하여 확인할 수 있음.   
- readyState 프로퍼티   
  - UNSENT (숫자 0) : XMLHttpRequest 객체가 생성됨   
  - OPENED (숫자 1) : open() 메소드가 성공적으로 실행됨   
  - HEADERS_RECEIVED (숫자 2) : 모든 요청에 대한 응답이 도착함   
  - LOADING (숫자 3) : 요청한 데이터를 처리 중임   
  - DONE (숫자 4) : 요청한 데이터의 처리가 완료되어 응답할 준비가 완료됨   
- status 프로퍼티   
  - 200 : 서버에 문서가 존재함   
  - 404 : 서버에 문서가 존재하지 않음   
- onreadystatechange 프로퍼티

<br>      
**GET 방식/POST 방식**
- GET : GET방식은 url 주소에 데이터(Data)를 추가하여 전달하는 방식으로, 이 방식의 http요청은 브라우저에 의해 캐시되어 저장됨. 데이터를 url 주소에 쿼리문자열을 포함하여 전송됨으로 길이의 제한이 있으며, 쿼리문자열이 공개되는 만큼 보안상 취약점이 존재하므로, 중요한 데이터는 POST방식을 사용하는 것이 좋음.   
- POST : POST방식은 데이터를 별도로 첨부하여 전달하는 방식임. 이 방식은 브라우저에 의해 캐시 되지 않음으로 브라우저 히스토리에도 남지 않음. 데이터를 별도로 전송하기 때문에 길이에 대한 제약도 없고 GET방식보다 보안성이 높음.   